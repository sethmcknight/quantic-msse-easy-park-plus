classDiagram
    class Visit {
        -VisitId visit_id
        -VehicleRegistration vehicle_registration
        -VehicleCategory vehicle_category_at_entry
        -TimeRange time_range
        -SlotId assigned_slot_id
        -VisitStatus current_status
        -ReservationId linked_reservation_id
        -ChargingSessionId linked_charging_session_id
        -GateId entry_gate_id
        -GateId exit_gate_id
        +start_visit(vehicle_registration, entry_timestamp, entry_gate_id)
        +assign_slot_to_visit(slot_id, assignment_timestamp, vehicle_category, lot_policies)
        +record_vehicle_exit(exit_timestamp, exit_gate_id)
        +complete_visit()
    }

    class Slot {
        -SlotId slot_id
        -SlotOperationalStatus operational_status
        -Timestamp last_status_update_timestamp
        +update_operational_status(new_status)
        +check_availability()
        +handle_maintenance_event()
    }

    class VisitId {
        -String value
    }

    class VehicleRegistration {
        -String plate_number
        -String jurisdiction
    }

    class TimeRange {
        -DateTime entry_timestamp
        -DateTime exit_timestamp
    }

    class SlotOperationalStatus {
        <<enumeration>>
        Available
        Occupied_SingleVehicle
        Occupied_SharedMotorcycle
        ReservedForReservation
        OutOfService_Maintenance
        BlockedManually
    }

    class VisitStatus {
        <<enumeration>>
        PendingEntry
        ActiveInLot
        AwaitingPayment
        PaymentConfirmed
        Exited
        Completed
        Cancelled
    }

    class VehicleCategory {
        <<enumeration>>
        Motorcycle
        Standard
        Oversized
    }

    class Location {
        -LotId lot_id
        -FloorId floor_id
        -String slot_number
        -SlotId slot_id_ref
    }

    class SensorData {
        -String sensor_id
        -Boolean occupancy_detected
        -DateTime timestamp
    }

    Visit ||--|| VisitId : has
    Visit ||--|| VehicleRegistration : has
    Visit ||--|| TimeRange : has
    Visit ||--|| VehicleCategory : has
    Visit ||--|| VisitStatus : has
    Visit }|--|| Slot : assigned_to
    Slot ||--|| SlotOperationalStatus : has
    Slot ||--|| Location : located_at