sequenceDiagram
    actor User
    participant UI as ParkingLotUI
    participant State as UIStateManager
    participant Valid as ValidationManager
    participant Park as ParkingManager
    participant Lot as ParkingLot
    participant Tree as TreeViewManager
    participant Msg as MessageManager

    User->>UI: Enter vehicle details
    UI->>State: Get input values
    State-->>UI: Return values
    UI->>Valid: Validate parking input
    Valid-->>UI: Validation result
    
    alt Invalid Input
        UI->>Msg: Show error message
        Msg-->>User: Display error
    else Valid Input
        UI->>Park: Request parking
        Park->>Lot: Park vehicle
        Lot-->>Park: Parking result
        Park-->>UI: Return result
        
        alt Parking Failed
            UI->>Msg: Show error message
            Msg-->>User: Display error
        else Parking Successful
            UI->>Tree: Update details view
            Tree-->>User: Show updated view
            UI->>Msg: Show success message
            Msg-->>User: Display success
        end
    end 